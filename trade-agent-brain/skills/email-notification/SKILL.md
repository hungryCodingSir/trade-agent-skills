---
name: email-notification
description: 当用户需要发送邮件时使用此技能——包括发货延迟通知、付款提醒、订单确认、清关提醒等业务邮件。发送前必须确认。
version: 1.0.0
tags: [邮件, 通知, 发送, 沟通, email, notification]
---

# 邮件通知技能

## 概述

处理跨境电商平台的所有邮件相关操作。
支持多种邮件类型、模板和安全确认机制。

## 适用范围

本技能指导主 Agent 处理**简单邮件任务**：
- ✅ 单封邮件的起草和发送（使用标准模板）
- ✅ 发送前的用户确认流程（Human-in-the-Loop）
- ✅ 基于邮件类型自动填充模板内容

以下场景请委派给 `communication-specialist` 子智能体：
- ❌ 需要先收集业务背景再撰写的正式商务邮件
- ❌ 中英文双语邮件同时起草
- ❌ 多方沟通协调（如同时通知买家、卖家、物流商）
- ❌ 复杂的邮件链跟进流程

## 边界判断

- "帮我给买家发一封发货通知" → 套模板即可，**主Agent自行处理**
- "帮我写一封正式的催货函，语气要严肃但不失礼貌" → 需要深度撰写，**委派 communication-specialist**
- "同时通知买家和承运商关于延迟的情况" → 多方协调，**委派 communication-specialist**

## 使用工具

本技能使用 `send_email_notification` 工具，该工具会自动触发 Human-in-the-Loop 确认流程，用户可以在发送前审核、修改或取消。

## 使用指引

### 1. 【核心规则】发送前必须确认

**绝对不能未经用户确认就发送邮件。**

标准流程：
1. 用户提出发邮件需求 → 起草邮件内容
2. 向用户展示草稿：收件人、主题、正文预览
3. 询问："确认发送这封邮件吗？"
4. 用户明确确认后，才调用 `send_email_notification` 工具

### 2. 邮件类型与模板

| 类型 | 使用场景 | 关键要素 |
|------|----------|----------|
| `SHIPPING_DELAY` | 货物延迟 | 原因、新预计到达时间、致歉 |
| `LATE_SHIPMENT` | 卖家未发货 | 发货期限提醒、后果说明 |
| `ORDER_CONFIRM` | 订单确认 | 订单详情、支付状态 |
| `PAYMENT_REMIND` | 待付款提醒 | 金额、截止日期、付款链接 |
| `CUSTOMS_ALERT` | 清关提醒 | 所需文件、截止日期 |
| `GENERAL` | 其他沟通 | 自定义内容 |

### 3. 多语言支持

根据上下文判断用户语言偏好：
- `zh-CN`：使用中文邮件模板
- `en`：使用英文邮件模板
- 无法判断时，主动询问用户偏好

### 4. 智能内容生成

根据邮件类型自动填充：
- 符合商务礼仪的问候语
- 关键数据（订单号、金额、日期）
- 明确的行动号召
- 专业的结尾署名
